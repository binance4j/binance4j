"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[694],{6028:function(e,t,a){a.d(t,{ZP:function(){return k}});var n=a(3066),i=a(5162),l=a(5488),o=a(7294),s=function(e){return e.client+" client = new "+e.client+"("+e.constructorParams.join(", ")+");\n\n"},r=function(e){return e.requestType?e.requestType+" request = new "+e.requestType+"("+(e.requestParameters?e.requestParameters.join(", "):"")+");\n\n":""};function c(e){var t=e.responseType?e.responseType+" response = ":"";return o.createElement(n.Z,{language:"java"},""+s(e)+r(e)+"try{\n    "+t+"client."+e.method+"("+(e.requestType?"request":"")+").execute();\n}catch(ApiException e){ \n//...\n}\n")}function d(e){return o.createElement(n.Z,{language:"java"},""+s(e)+r(e)+"client."+e.method+"("+(e.requestType?"request":"")+").then(response->{\n  //...\n});\n")}function m(e){var t=e.responseType?e.responseType+" response":"";return o.createElement(n.Z,{language:"java"},""+s(e)+r(e)+"client."+e.method+"().then(new ApiCallback<"+(e.responseType?e.responseType:"Void")+">() {\n    @Override\n    public void onResponse("+t+") {\n        //...\n    }\n\n    @Override\n    public void onFailure(ApiException exception) {\n        //...\n    }\n});\n")}function k(e){return o.createElement(o.Fragment,null,o.createElement(l.Z,null,o.createElement(i.Z,{label:"Sync",value:"sync",default:!0},o.createElement(c,e)),o.createElement(i.Z,{label:"Async (lambda)",value:"async-lambda"},o.createElement(d,e)),o.createElement(i.Z,{label:"Async (ApiCallback)",value:"async-api-callback"},o.createElement(m,e))))}},1424:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(7294),i=a(4645);function l(e){var t=e.path;return n.createElement(i.Z,{label:"endpoint",message:t,color:"blueviolet"})}var o=a(3738);function s(e){var t=e.weight;return n.createElement(i.Z,{label:"weight",message:t,color:"blue"})}function r(e){var t=e.signature;return n.createElement(i.Z,{label:"signature",message:t,color:"red"})}function c(e){return n.createElement(n.Fragment,null,n.createElement(l,{path:e.path}),"\xa0",n.createElement(s,{weight:e.weight}),"\xa0",n.createElement(r,{signature:e.signature}),"\xa0",n.createElement(o.Z,{label:e.label,artifact:e.artifact,javadoc:e.javadoc,version:e.version}))}},6041:function(e,t,a){a.r(t),a.d(t,{assets:function(){return f},contentTitle:function(){return w},default:function(){return W},frontMatter:function(){return N},metadata:function(){return C},toc:function(){return x}});var n=a(7462),i=a(3366),l=(a(7294),a(3905)),o=a(3066),s=a(5162),r=a(5488),c=a(112),d=a(9098),m=a(3738),k=a(1424),p=a(8306),u=["components"],v={toc:[]};function h(e){var t=e.components,a=(0,i.Z)(e,u);return(0,l.kt)("wrapper",(0,n.Z)({},v,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)(k.Z,{artifact:"websocket",javadoc:"com/binance4j/websocket/"+a.javadoc,version:p.i,weight:a.weight,signature:a.signature,path:a.path,label:a.label,mdxType:"Badge"}))}h.isMDXComponent=!0;var b=["components"],g={toc:[]};function T(e){var t=e.components,a=(0,i.Z)(e,b);return(0,l.kt)("wrapper",(0,n.Z)({},g,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)(m.Z,{artifact:"websocket",javadoc:"com/binance4j/websocket/"+a.javadoc,version:p.i,label:a.label,mdxType:"JavadocBadge"}))}T.isMDXComponent=!0;var y=a(6028),B=["components"],N={title:"Websocket"},w=void 0,C={unversionedId:"Websocket",id:"Websocket",title:"Websocket",description:"Description",source:"@site/docs/09-Websocket.mdx",sourceDirName:".",slug:"/Websocket",permalink:"/binance4j/docs/Websocket",draft:!1,editUrl:"https://github.com/binance4j/docs/09-Websocket.mdx",tags:[],version:"current",sidebarPosition:9,frontMatter:{title:"Websocket"},sidebar:"tutorialSidebar",previous:{title:"Vision",permalink:"/binance4j/docs/Vision"},next:{title:"Strategy",permalink:"/binance4j/docs/Strategy"}},f={},x=[{value:"Description",id:"description",level:2},{value:"Installation",id:"installation",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"How does it work?",id:"how-does-it-work",level:2},{value:"Event handlers",id:"event-handlers",level:3},{value:"Open/Close the stream",id:"openclose-the-stream",level:3},{value:"Stream lifespan",id:"stream-lifespan",level:3},{value:"Ping the server",id:"ping-the-server",level:4},{value:"Ping the server back",id:"ping-the-server-back",level:4},{value:"Reconnect after a disconnection",id:"reconnect-after-a-disconnection",level:4},{value:"Reconnect after a connection failure",id:"reconnect-after-a-connection-failure",level:4},{value:"Reconnect after no response for some time",id:"reconnect-after-no-response-for-some-time",level:4},{value:"Available Websocket clients",id:"available-websocket-clients",level:2},{value:"Individual Symbol Ticker Streams",id:"individual-symbol-ticker-streams",level:3},{value:"Individual Symbol Mini Ticker Stream",id:"individual-symbol-mini-ticker-stream",level:3},{value:"All Market Tickers Stream",id:"all-market-tickers-stream",level:3},{value:"All Market Mini Tickers Stream",id:"all-market-mini-tickers-stream",level:3},{value:"Individual Symbol Book Ticker Streams",id:"individual-symbol-book-ticker-streams",level:3},{value:"All Book Tickers Stream",id:"all-book-tickers-stream",level:3},{value:"Kline/Candlestick Streams",id:"klinecandlestick-streams",level:3},{value:"Diff. Depth Stream",id:"diff-depth-stream",level:3},{value:"Partial Book Depth Streams",id:"partial-book-depth-streams",level:3},{value:"Trade Streams",id:"trade-streams",level:3},{value:"Aggregate Trade Streams",id:"aggregate-trade-streams",level:3},{value:"User Data Streams",id:"user-data-streams",level:3},{value:"Keep the User data Stream open",id:"keep-the-user-data-stream-open",level:3},{value:"User data endpoints",id:"user-data-endpoints",level:2},{value:"Start user data stream",id:"start-user-data-stream",level:3},{value:"Keep alive user data stream",id:"keep-alive-user-data-stream",level:3},{value:"Close out a user data stream",id:"close-out-a-user-data-stream",level:3}],D={toc:x};function W(e){var t=e.components,a=(0,i.Z)(e,B);return(0,l.kt)("wrapper",(0,n.Z)({},D,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)(d.Z,{artifact:"websocket",version:p.i,mdxType:"RepoBadges"}),(0,l.kt)("h2",{id:"description"},"Description"),(0,l.kt)("p",null,"Binance4j-websocket is a set of Java connectors for the Binance Websocket API."),(0,l.kt)("h2",{id:"installation"},"Installation"),(0,l.kt)(c.Z,{repo:"websocket",version:p.i,mdxType:"InstallationInstructions"}),(0,l.kt)("h2",{id:"dependencies"},"Dependencies"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"Core"},"binance4j-core")," : The core of every binance4j artifact"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://projectlombok.org/"},"Lombok")," : Prevent boilerplate code."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://square.github.io/okhttp/"},"OkHttp")," : HTTP && Websocket clients"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://square.github.io/retrofit/"},"Retrofit")," : Map API endpoints with annotations."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/FasterXML/jackson"},"Jackson")," : Payload deserialization"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://commons.apache.org/proper/commons-codec/"},"Apache Common Codecs")," : Encode/decode urls"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://reactivex.io/intro.html"},"RxJava")," : asynchronous and event-based programs by using observable sequences.")),(0,l.kt)("h2",{id:"how-does-it-work"},"How does it work?"),(0,l.kt)(m.Z,{artifact:"websocket",javadoc:"com/binance4j/websocket/client/WebsocketClient.html",version:p.i,mdxType:"JavadocBadge"}),(0,l.kt)("p",null,"The goal of a websocket client is to receive real time data from the Binance API through a persistent, bi-directional stream.\nThis can be market or user/balance data. Every client share the same methods as they inherit from the ",(0,l.kt)("inlineCode",{parentName:"p"},"WebsocketClient")," class."),(0,l.kt)("h3",{id:"event-handlers"},"Event handlers"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"//The connection with the server is opened.\nclient.onOpen(response -> {\n    // ...\n});\n\n//The connection with the server is closing.\nclient.onClosing(cb -> {\n    // ...\n});\n\n//The connection with the server is closed.\nclient.onClosed(cb -> {\n    // ...\n});\n\n//Connection failed, deserialization failed, the server has not sent data for a long time (timeout)\nclient.onFailure(cb -> {\n    // ...\n});\n\n//The server pushed data\nclient.onMessage(cb -> {\n    // ...\n});\n")),(0,l.kt)("h3",{id:"openclose-the-stream"},"Open/Close the stream"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"//When the connection will open, the `onOpen` handler will be called.\nclient.open();\n\n//Before closing, the `onClosing` handler will be called, then `onClosed` once the connection is closed.\nclient.close();\n")),(0,l.kt)("h3",{id:"stream-lifespan"},"Stream lifespan"),(0,l.kt)("p",null,"From Binance documentation:"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"A single connection to stream.binance.com is only valid for 24 hours; expect to be disconnected at the 24 hour mark.")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"The websocket server will send a ping frame every 3 minutes.\nIf the websocket server does not receive a pong frame back from the connection within a 10 minute period, the connection will be disconnected.\nUnsolicited pong frames are allowed.")),(0,l.kt)("h4",{id:"ping-the-server"},"Ping the server"),(0,l.kt)("p",null,"Websocket clients automatically ping the server every 3 minutes. You don't need to do anything! But if you want to change that interval, just call:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"client.setPingInterval(java.time.Duration)\n")),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The stream must be closed or this won't work. If you need to change this interval, close and reopen the stream."))),(0,l.kt)("h4",{id:"ping-the-server-back"},"Ping the server back"),(0,l.kt)("p",null,"Again, websocket clients automatically pings back. You don't need to do anything!"),(0,l.kt)("h4",{id:"reconnect-after-a-disconnection"},"Reconnect after a disconnection"),(0,l.kt)("p",null,"Every websocket client is by default configured to automatically reconnect if the stream is closed by the server. If you don't like this behaviour, just call:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"client.setKeepAlive(false);\n")),(0,l.kt)("p",null,"Next time the client is disconnected, it won't try to reconnect."),(0,l.kt)("h4",{id:"reconnect-after-a-connection-failure"},"Reconnect after a connection failure"),(0,l.kt)("p",null,"Every websocket client is by default configured to automatically reconnect after a connection failure. If you don't like this behaviour, just call:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"client.retryOnConnectionFailure(false);\n")),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The stream must be closed or this won't work. If you need to change this interval, close and reopen the stream."))),(0,l.kt)("h4",{id:"reconnect-after-no-response-for-some-time"},"Reconnect after no response for some time"),(0,l.kt)("p",null,"It can happen that after some time, the server stops sending data to the client. Every websocket client is by default configured to automatically disconnect and reconnect after a not receiving data for some time (3 minutes by default). To change this interval call:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"client.setNoResponseTimeout(time.Duration);\n")),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The stream must be closed or this won't work. If you need to change this interval, close and reopen the stream."))),(0,l.kt)("p",null,"Since Binance recommends a 30 minutes interval, i wouldn't recommend to change this value."),(0,l.kt)("h2",{id:"available-websocket-clients"},"Available Websocket clients"),(0,l.kt)("h3",{id:"individual-symbol-ticker-streams"},"Individual Symbol Ticker Streams"),(0,l.kt)(T,{label:"WebsocketTickerClient",javadoc:"client/WebsocketTickerClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"TickerPayload",javadoc:"payload/TickerPayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"Handles 24hr rolling window ticker statistics for a single symbol."),(0,l.kt)(r.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{label:"One symbol",value:"one-symbol",default:!0,mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketTickerClient client = new WebsocketTickerClient("BNBBTC");')),(0,l.kt)(s.Z,{label:"Multiple symbols (String)",value:"multiple-symbols-string",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketTickerClient client = new WebsocketTickerClient("BNBBTC, BNBBUSD");')),(0,l.kt)(s.Z,{label:"Multiple symbols (List)",value:"multiple-symbols-list",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketTickerClient client = new WebsocketTickerClient(List.of("BNBBTC", "BNBBUSD"));'))),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"These are NOT the statistics of the UTC day, but a 24hr rolling window for the previous 24hrs."))),(0,l.kt)("h3",{id:"individual-symbol-mini-ticker-stream"},"Individual Symbol Mini Ticker Stream"),(0,l.kt)(T,{label:"WebsocketMiniTickerClient",javadoc:"client/WebsocketMiniTickerClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"MiniTickerPayload",javadoc:"payload/MiniTickerPayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"24hr rolling window mini-ticker statistics."),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"These are NOT the statistics of the UTC day, but a 24hr rolling window for the previous 24hrs."))),(0,l.kt)(r.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{label:"One symbol",value:"one-symbol",default:!0,mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketMiniTickerClient client = new WebsocketMiniTickerClient("BNBBTC");')),(0,l.kt)(s.Z,{label:"Multiple symbols (String)",value:"multiple-symbols-string",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketMiniTickerClient client = new WebsocketMiniTickerClient("BNBBTC, BNBBUSD");')),(0,l.kt)(s.Z,{label:"Multiple symbols (List)",value:"multiple-symbols-list",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketMiniTickerClient client = new WebsocketMiniTickerClient(List.of("BNBBTC", "BNBBUSD"));'))),(0,l.kt)("h3",{id:"all-market-tickers-stream"},"All Market Tickers Stream"),(0,l.kt)(T,{label:"WebsocketAllMiniTickersClient",javadoc:"client/WebsocketAllMiniTickersClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"TickerPayload",javadoc:"payload/TickerPayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"24hr rolling window ticker statistics for all symbols that changed."),(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},"WebsocketAllTickersClient client = new WebsocketAllTickersClient();"),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"These are NOT the statistics of the UTC day, but a 24hr rolling window for the previous 24hrs."))),(0,l.kt)("h3",{id:"all-market-mini-tickers-stream"},"All Market Mini Tickers Stream"),(0,l.kt)(T,{label:"WebsocketAllMiniTickersClient",javadoc:"client/WebsocketAllMiniTickersClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"MiniTickerPayload",javadoc:"payload/MiniTickerPayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"24hr rolling window mini-ticker statistics for all symbols that changed."),(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},"WebsocketAllMiniTickersClient client = new WebsocketAllMiniTickersClient();"),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"These are NOT the statistics of the UTC day, but a 24hr rolling window for the previous 24hrs."))),(0,l.kt)("h3",{id:"individual-symbol-book-ticker-streams"},"Individual Symbol Book Ticker Streams"),(0,l.kt)(T,{label:"WebsocketBookTickerClient",javadoc:"client/WebsocketBookTickerClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"BookTickerPayload",javadoc:"payload/BookTickerPayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"Pushes any update to the best bid or ask's price or quantity in real-time for a specified symbol."),(0,l.kt)(r.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{label:"One symbol",value:"one-symbol",default:!0,mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketBookTickerClient client = new WebsocketBookTickerClient("BNBBTC");')),(0,l.kt)(s.Z,{label:"Multiple symbols (String)",value:"multiple-symbols-string",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketBookTickerClient client = new WebsocketBookTickerClient("BNBBTC, BNBBUSD");')),(0,l.kt)(s.Z,{label:"Multiple symbols (List)",value:"multiple-symbols-list",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketBookTickerClient client = new WebsocketBookTickerClient(List.of("BNBBTC", "BNBBUSD"));'))),(0,l.kt)("h3",{id:"all-book-tickers-stream"},"All Book Tickers Stream"),(0,l.kt)(T,{label:"WebsocketAllBookTickersClient",javadoc:"client/WebsocketAllBookTickersClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"BookTickerPayload",javadoc:"payload/BookTickerPayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"Pushes any update to the best bid or ask's price or quantity in real-time for all symbols."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"WebsocketAllBookTickersClient client = new WebsocketAllBookTickersClient();\n")),(0,l.kt)("h3",{id:"klinecandlestick-streams"},"Kline/Candlestick Streams"),(0,l.kt)(T,{label:"WebsocketCandlestickClient",javadoc:"client/WebsocketCandlestickClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"CandlestickBarPayload",javadoc:"payload/CandlestickBarPayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"The Kline/Candlestick Stream push updates to the current klines/candlestick every second."),(0,l.kt)(r.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{label:"One symbol",value:"one-symbol",default:!0,mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketCandlestickClient client = new WebsocketCandlestickClient("BNBBTC", CandlestickInterval.FIVE_MINUTE);')),(0,l.kt)(s.Z,{label:"Multiple symbols (String)",value:"multiple-symbols-string",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketCandlestickClient client = new WebsocketCandlestickClient("BNBBTC, BNBBUSD", CandlestickInterval.FIVE_MINUTE);')),(0,l.kt)(s.Z,{label:"Multiple symbols (List)",value:"multiple-symbols-list",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketCandlestickClient client = new WebsocketCandlestickClient(List.of("BNBBTC", "BNBBUSD", CandlestickInterval.FIVE_MINUTE));'))),(0,l.kt)("h3",{id:"diff-depth-stream"},"Diff. Depth Stream"),(0,l.kt)(T,{label:"WebsocketDepthClient",javadoc:"client/WebsocketDepthClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"DepthPayload",javadoc:"payload/DepthPayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"Order book price and quantity depth updates used to locally manage an order book."),(0,l.kt)(r.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{label:"One symbol",value:"one-symbol",default:!0,mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketDepthClient client = new WebsocketDepthClient("BNBBTC");')),(0,l.kt)(s.Z,{label:"Multiple symbols (String)",value:"multiple-symbols-string",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketDepthClient client = new WebsocketDepthClient("BNBBTC, BNBBUSD");')),(0,l.kt)(s.Z,{label:"Multiple symbols (List)",value:"multiple-symbols-list",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketDepthClient client = new WebsocketDepthClient(List.of("BNBBTC", "BNBBUSD"));'))),(0,l.kt)("h3",{id:"partial-book-depth-streams"},"Partial Book Depth Streams"),(0,l.kt)(T,{label:"WebsocketMiniDepthClient",javadoc:"client/WebsocketMiniDepthClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"MiniDepthPayload",javadoc:"payload/MiniDepthPayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"Top bids and asks, Valid are 5, 10, or 20."),(0,l.kt)(r.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{label:"One symbol",value:"one-symbol",default:!0,mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketMiniDepthClient client = new WebsocketMiniDepthClient("BNBBTC");')),(0,l.kt)(s.Z,{label:"Multiple symbols (String)",value:"multiple-symbols-string",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketMiniDepthClient client = new WebsocketMiniDepthClient("BNBBTC, BNBBUSD");')),(0,l.kt)(s.Z,{label:"Multiple symbols (List)",value:"multiple-symbols-list",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketMiniDepthClient client = new WebsocketMiniDepthClient(List.of("BNBBTC", "BNBBUSD"));'))),(0,l.kt)("h3",{id:"trade-streams"},"Trade Streams"),(0,l.kt)(T,{label:"WebsocketTradeClient",javadoc:"client/WebsocketTradeClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"TradePayload",javadoc:"payload/TradePayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"The Trade Streams push raw trade information; each trade has a unique buyer and seller."),(0,l.kt)(r.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{label:"One symbol",value:"one-symbol",default:!0,mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketTradeClient client = new WebsocketTradeClient("BNBBTC");')),(0,l.kt)(s.Z,{label:"Multiple symbols (String)",value:"multiple-symbols-string",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketTradeClient client = new WebsocketTradeClient("BNBBTC, BNBBUSD");')),(0,l.kt)(s.Z,{label:"Multiple symbols (List)",value:"multiple-symbols-list",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketTradeClient client = new WebsocketTradeClient(List.of("BNBBTC", "BNBBUSD"));'))),(0,l.kt)("h3",{id:"aggregate-trade-streams"},"Aggregate Trade Streams"),(0,l.kt)(T,{label:"WebsocketAggTradeClient",javadoc:"client/WebsocketAggTradeClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"AggTradePayload",javadoc:"payload/AggTradePayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"The Aggregate Trade Streams push trade information that is aggregated for a single taker order."),(0,l.kt)(r.Z,{mdxType:"Tabs"},(0,l.kt)(s.Z,{label:"One symbol",value:"one-symbol",default:!0,mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketAggTradeClient client = new WebsocketAggTradeClient("BNBBTC");')),(0,l.kt)(s.Z,{label:"Multiple symbols (String)",value:"multiple-symbols-string",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketAggTradeClient client = new WebsocketAggTradeClient("BNBBTC, BNBBUSD");')),(0,l.kt)(s.Z,{label:"Multiple symbols (List)",value:"multiple-symbols-list",mdxType:"TabItem"},(0,l.kt)(o.Z,{language:"java",mdxType:"CodeBlock"},'WebsocketAggTradeClient client = new WebsocketAggTradeClient(List.of("BNBBTC", "BNBBUSD"));'))),(0,l.kt)("h3",{id:"user-data-streams"},"User Data Streams"),(0,l.kt)(T,{label:"WebsocketUserDataClient",javadoc:"client/WebsocketUserDataClient.html",mdxType:"Badge"}),"\xa0",(0,l.kt)(T,{label:"UserDataUpdatePayload",javadoc:"payload/UserDataUpdatePayload.html",mdxType:"Badge"}),(0,l.kt)("p",null,"The User Data Streams push account, balance and order update infos."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"// Instantiate a UserDataClient\nUserDataClient userDataClient = new UserDataClient(key,secret);\n\n// instantiate the ws client\nWebsocketUserDataClient client = new WebsocketUserDataClient(userDataClient);\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Account Update : outboundAccountPosition is sent any time an account balance has changed and contains the assets that were possibly changed by the event that generated the balance change.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Balance Update: Balance Update occurs during the following:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Deposits or withdrawals from the account"),(0,l.kt)("li",{parentName:"ul"},"Transfer of funds between accounts (e.g. Spot to Margin)"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Order Update: Orders are updated with the executionReport event. Check the ",(0,l.kt)("a",{parentName:"p",href:"https://binance-docs.github.io/apidocs/spot/en/#public-api-definitions"},"Public API Definitions")," and below for relevant enum definitions. Execution types:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"NEW - The order has been accepted into the engine."),(0,l.kt)("li",{parentName:"ul"},"CANCELED - The order has been canceled by the user."),(0,l.kt)("li",{parentName:"ul"},"REPLACED (currently unused)"),(0,l.kt)("li",{parentName:"ul"},"REJECTED - The order has been rejected and was not processed. (This is never pushed into the User Data Stream)"),(0,l.kt)("li",{parentName:"ul"},"TRADE - Part of the order or all of the order's quantity has filled."),(0,l.kt)("li",{parentName:"ul"},"EXPIRED - The order was canceled according to the order type's rules (e.g. LIMIT FOK orders with no fill, LIMIT IOC or MARKET orders that partially fill) or by the exchange, (e.g. orders canceled during liquidation, orders canceled during maintenance)")))),(0,l.kt)("h3",{id:"keep-the-user-data-stream-open"},"Keep the User data Stream open"),(0,l.kt)("p",null,"From Binance documentation:"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"The stream will close after 60 minutes unless a keepalive is sent.\nIt's recommended to send a ping about every 30 minutes.")),(0,l.kt)("p",null,"The WebsocketUserDataClient constructor takes a ",(0,l.kt)("inlineCode",{parentName:"p"},"UserDataCLient")," instance as parameter. In this way, it will automatically ask a listen key to the API and extends its lifespan by pinging the server every 30 minutes."),(0,l.kt)("p",null,"The interval can be changed by calling:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"client.setKeepAliveInterval(java.time.Duration);\n")),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The stream must be closed or this won't work. If you need to change this interval, close and reopen the stream."))),(0,l.kt)("p",null,"Since Binance recommends a 30 minutes interval, i wouldn't recommend to change this value."),(0,l.kt)("h2",{id:"user-data-endpoints"},"User data endpoints"),(0,l.kt)("h3",{id:"start-user-data-stream"},"Start user data stream"),(0,l.kt)(h,{label:"startUserDataStream()",version:p.i,artifact:"websocket",javadoc:"client/UserDataClient.html#startUserDataStream()",weight:"1 (IP)",signature:"signed (HMAC SHA256)",path:"POST /api/v3/userDataStream",mdxType:"Badges"}),(0,l.kt)("p",null,"Returns a listen key to open a user data websocket stream."),(0,l.kt)(y.ZP,{client:"UserDataClient",constructorParams:["key","secret"],method:"startUserDataStream",responseType:"ListenKey",mdxType:"Examples"}),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The stream will close after 60 minutes unless a keepalive is sent."),(0,l.kt)("p",{parentName:"div"},"If the account has an active listenKey, that listenKey will be returned and its validity will be extended for 60 minutes."))),(0,l.kt)("h3",{id:"keep-alive-user-data-stream"},"Keep alive user data stream"),(0,l.kt)(h,{label:"keepAliveUserDataStream()",version:p.i,artifact:"websocket",javadoc:"client/UserDataClient.html#keepAliveUserDataStream(java.lang.String)",weight:"1 (IP)",signature:"signed (HMAC SHA256)",path:"PUT /api/v3/userDataStream",mdxType:"Badges"}),(0,l.kt)("p",null,"Keepalive a user data stream to prevent a time out."),(0,l.kt)(y.ZP,{client:"UserDataClient",constructorParams:["key","secret"],method:"keepAliveUserDataStream",requestType:"String",requestParameters:["/** listenKey */"],mdxType:"Examples"}),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"User data streams will close after 60 minutes."),(0,l.kt)("p",{parentName:"div"},"It's recommended to send a ping about every 30 minutes."))),(0,l.kt)("h3",{id:"close-out-a-user-data-stream"},"Close out a user data stream"),(0,l.kt)(h,{label:"closeUserDataStream()",version:p.i,artifact:"websocket",javadoc:"client/UserDataClient.html#closeUserDataStream(java.lang.String)",weight:"1 (IP)",signature:"signed (HMAC SHA256)",path:"DELETE /api/v3/userDataStream",mdxType:"Badges"}),(0,l.kt)(y.ZP,{client:"UserDataClient",constructorParams:["key","secret"],method:"loseUserDataStream",requestType:"String",requestParameters:["/** listenKey */"],mdxType:"Examples"}))}W.isMDXComponent=!0}}]);